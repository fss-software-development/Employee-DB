<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <!-- This change set defines the initial table definition for the consent service
    based off https://tideaccount.atlassian.net/wiki/spaces/PAYM/pages/1178271757/Spike+PAYBA-1428+-+Consent+Service+DB -->


    <changeSet id="01" author="Rama Prabhu R">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
				CREATE TABLE employee_db_test.department (
					  DEPARTMENT_ID INT(11) NOT NULL,
					  DEPARTMENT_NAME VARCHAR(45) NOT NULL,
					  DEPARTMENT_HEAD VARCHAR(45) NOT NULL,
					  INS_USER INT(11) NOT NULL,
					  INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
					  LAST_UPDATE_USER INT(11) NULL,
					  LAST_UPDATE_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
					  PRIMARY KEY (DEPARTMENT_ID)
				) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="02" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
		     CREATE TABLE IF NOT EXISTS employee_db_test.account (
                ACCOUNT_ID INT(11) NOT NULL,
                ACCOUNT_NAME VARCHAR(45) NOT NULL,
				INS_USER INT(11) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				LAST_UPDATE_USER INT(11) NULL,
				LAST_UPDATE_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				PRIMARY KEY (ACCOUNT_ID)
			 )  ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
          ]]>
        </sql>
    </changeSet>

    <changeSet id="03" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
			 CREATE TABLE IF NOT EXISTS employee_db_test.region (
				REGION_ID INT(11) NOT NULL,
				REGION_NAME VARCHAR(45) NOT NULL,
				INS_USER INT(11) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				LAST_UPDATE_USER INT(11) NULL,
				LAST_UPDATE_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				PRIMARY KEY (REGION_ID)
			 ) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
           ]]>
        </sql>
    </changeSet>

    <changeSet id="04" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
			  CREATE TABLE IF NOT EXISTS employee_db_test.location (
				LOCATION_ID INT(11) NOT NULL,
				LOCATION_NAME VARCHAR(45) NOT NULL,
				INS_USER INT(11) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				LAST_UPDATE_USER INT(11) NULL,
				LAST_UPDATE_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				PRIMARY KEY (LOCATION_ID)
			  ) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="05" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
			  CREATE TABLE IF NOT EXISTS employee_db_test.skill (
				SKILL_ID INT(11) NOT NULL,
				SKILL_NAME VARCHAR(45) NOT NULL,
				INS_USER INT(11) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				LAST_UPDATE_USER INT(11) NULL,
				LAST_UPDATE_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				PRIMARY KEY (SKILL_ID)
			  ) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="06" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
	         CREATE TABLE IF NOT EXISTS employee_db_test.designation (
				DESIGNATION_ID INT(11) NOT NULL,
				DESIGNATION_NAME VARCHAR(255) NOT NULL,
				INS_USER INT(11) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				LAST_UPDATE_USER INT(11) NULL,
				LAST_UPDATE_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				PRIMARY KEY (DESIGNATION_ID)
			 ) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="07" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
			CREATE TABLE IF NOT EXISTS employee_db_test.user (
			    USER_SQID INT(11) NOT NULL,
				USER_ID VARCHAR(45) NOT NULL,
				USER_NAME VARCHAR(16) NOT NULL,
				EMAIL VARCHAR(255) NOT NULL,
				PASSWORD VARCHAR(32) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				LAST_UPDATE_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				UNIQUE INDEX EMAIL_UNIQUE (EMAIL ASC) ,
				UNIQUE INDEX USER_ID_UNIQUE (USER_ID ASC) ,
				PRIMARY KEY (USER_SQID)
			 ) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="08" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
			CREATE TABLE IF NOT EXISTS employee_db_test.service_line (
				SERVICE_LINE_ID INT(11) NOT NULL,
				SERVICE_LINE_NAME VARCHAR(45) NOT NULL,
				PRIMARY KEY (SERVICE_LINE_ID),
				UNIQUE INDEX SERVICE_LINE_NAME_UNIQUE (SERVICE_LINE_NAME ASC)
			 )  ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="09" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
		    CREATE TABLE IF NOT EXISTS employee_db_test.billable_status (
                BILLABLE_STATUS_ID INT NOT NULL,
                BILLABLE_STATUS VARCHAR(255) NOT NULL,
            PRIMARY KEY (BILLABLE_STATUS_ID)
            ) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="10" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
		        CREATE TABLE IF NOT EXISTS employee_db_test.grade (
                    GRADE_ID INT NOT NULL,
                    GRADE_NAME VARCHAR(45) NOT NULL,
                    PRIMARY KEY (GRADE_ID)
                 ) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="11" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
	           	CREATE TABLE IF NOT EXISTS employee_db_test.academics (
                    ACADEMICS_ID INT NOT NULL,
                    ACADEMICS_NAME VARCHAR(45) NOT NULL,
                    PRIMARY KEY (ACADEMICS_ID)
                  ) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="12" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
		        CREATE TABLE IF NOT EXISTS employee_db_test.project_tagging (
                     PROJECT_TAGGING_ID INT NOT NULL,
                     PROJECT_TAGGING VARCHAR(45) NOT NULL,
                     PRIMARY KEY (PROJECT_TAGGING_ID)
                 ) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="13" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
		        CREATE TABLE IF NOT EXISTS employee_db_test.role (
                     ROLE_ID INT NOT NULL,
                     ROLE_NAME VARCHAR(45) NOT NULL,
                     PRIMARY KEY (ROLE_ID)
                    )  ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="14" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
			  CREATE TABLE IF NOT EXISTS employee_db_test.employee (
				EMPLOYEE_SQID INT(11) NOT NULL,
				EMPLOYEE_ID VARCHAR(10) NOT NULL,
				DEPARTMENT_ID INT(11) NOT NULL,
				ACCOUNT_ID INT(11) NOT NULL,
				REGION_ID INT(11) NOT NULL,
				LOCATION_ID INT(11) NOT NULL,
				FIRST_NAME VARCHAR(45) NOT NULL,
				MIDDLE_NAME VARCHAR(45) NULL DEFAULT NULL,
				LAST_NAME VARCHAR(45) NOT NULL,
				MOBILE_NUM INT(11) NULL DEFAULT NULL,
				EMAIL_ID VARCHAR(45) NOT NULL,
				GRADE_ID INT(11) NOT NULL,
				DESIGNATION_ID INT(11) NOT NULL,
				REPORTING_MANAGER VARCHAR(45) NULL DEFAULT NULL,
				PREVIOUS_EXP INT(3) NULL DEFAULT NULL,
				JOINING_DATE DATE NOT NULL,
				BILLABLE_STATUS_ID INT NOT NULL,
				SERVICE_LINE_ID INT(11) NULL,
				ACTIVITY_NAME VARCHAR(45) NULL,
				PRIMARY_SKILL INT(11) NULL,
				EXPERIENCE_GAPS TINYINT NULL,
				ACADEMICS_ID INT NOT NULL,
				PROJECT_TAGGING_ID INT NOT NULL,
				ROLE_ID INT NOT NULL,
				INS_USER INT(11) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				LAST_UPDATE_USER INT(11) NULL DEFAULT NULL,
				LAST_UPDATE_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				PRIMARY KEY (EMPLOYEE_SQID),
				UNIQUE INDEX EMPLOYEE_ID_UNIQUE (EMPLOYEE_ID ASC) ,
				INDEX fk_employee_department_idx (DEPARTMENT_ID ASC) ,
				INDEX fk_employee_account1_idx (ACCOUNT_ID ASC) ,
				INDEX fk_employee_region1_idx (REGION_ID ASC) ,
				INDEX fk_employee_location1_idx (LOCATION_ID ASC) ,
				UNIQUE INDEX EMAIL_ID_UNIQUE (EMAIL_ID ASC) ,
				INDEX fk_employee_skill_idx (PRIMARY_SKILL ASC) ,
				INDEX fk_employee_designation_idx (DESIGNATION_ID ASC) ,
				INDEX fk_employee_user_idx (INS_USER ASC) ,
				INDEX fk_employee_user2_idx (LAST_UPDATE_USER ASC) ,
				INDEX fk_employee_serviceline_idx (SERVICE_LINE_ID ASC) ,
				INDEX fk_employee_billable_status1_idx (BILLABLE_STATUS_ID ASC) ,
				INDEX fk_employee_grade1_idx (GRADE_ID ASC) ,
				INDEX fk_employee_academics1_idx (ACADEMICS_ID ASC) ,
				INDEX fk_employee_project_tagging1_idx (PROJECT_TAGGING_ID ASC) ,
				INDEX fk_employee_role1_idx (ROLE_ID ASC) ,
				CONSTRAINT fk_employee_department
					FOREIGN KEY (DEPARTMENT_ID)
					REFERENCES employee_db_test.department (DEPARTMENT_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_account1
					FOREIGN KEY (ACCOUNT_ID)
					REFERENCES employee_db_test.account (ACCOUNT_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_region1
					FOREIGN KEY (REGION_ID)
					REFERENCES employee_db_test.region (REGION_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_location1
					FOREIGN KEY (LOCATION_ID)
					REFERENCES employee_db_test.location (LOCATION_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_skill
					FOREIGN KEY (PRIMARY_SKILL)
					REFERENCES employee_db_test.skill (SKILL_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_designation
					FOREIGN KEY (DESIGNATION_ID)
					REFERENCES employee_db_test.designation (DESIGNATION_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_user
					FOREIGN KEY (INS_USER)
					REFERENCES employee_db_test.user (USER_SQID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_user2
					FOREIGN KEY (LAST_UPDATE_USER)
					REFERENCES employee_db_test.user (USER_SQID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_serviceline
					FOREIGN KEY (SERVICE_LINE_ID)
					REFERENCES employee_db_test.service_line (SERVICE_LINE_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_billable_status1
					FOREIGN KEY (BILLABLE_STATUS_ID)
					REFERENCES employee_db_test.billable_status (BILLABLE_STATUS_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_grade1
					FOREIGN KEY (GRADE_ID)
					REFERENCES employee_db_test.grade (GRADE_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_academics1
					FOREIGN KEY (ACADEMICS_ID)
					REFERENCES employee_db_test.academics (ACADEMICS_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_project_tagging1
					FOREIGN KEY (PROJECT_TAGGING_ID)
					REFERENCES employee_db_test.project_tagging (PROJECT_TAGGING_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_role1
					FOREIGN KEY (ROLE_ID)
					REFERENCES employee_db_test.role (ROLE_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="15" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
			  CREATE TABLE IF NOT EXISTS employee_db_test.project (
				PROJECT_ID INT(11) NOT NULL,
				DEPARTMENT_ID INT(11) NOT NULL,
				PROJECT_NAME VARCHAR(45) NOT NULL,
				PROJECT_MANAGER VARCHAR(45) NOT NULL,
				PROJECT_STATUS VARCHAR(45) NOT NULL,
				ACCOUNT_ID INT(11) NOT NULL,
				INS_USER INT(11) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				LAST_UPDATE_USER INT(11) NULL DEFAULT NULL,
				LAST_UPDATE_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				PRIMARY KEY (PROJECT_ID),
				INDEX fk_project_department_idx (DEPARTMENT_ID ASC) ,
				INDEX fk_project_user_idx (INS_USER ASC) ,
				INDEX fk_project_user2_idx (LAST_UPDATE_USER ASC) ,
				INDEX fk_project_account_idx (ACCOUNT_ID ASC) ,
				CONSTRAINT fk_project_department
					FOREIGN KEY (DEPARTMENT_ID)
					REFERENCES employee_db_test.department (DEPARTMENT_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_project_user
					FOREIGN KEY (INS_USER)
					REFERENCES employee_db_test.user (USER_SQID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_project_user2
					FOREIGN KEY (LAST_UPDATE_USER)
					REFERENCES employee_db_test.user (USER_SQID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_project_account
					FOREIGN KEY (ACCOUNT_ID)
					REFERENCES employee_db_test.account (ACCOUNT_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION
				) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="16" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
			  CREATE TABLE IF NOT EXISTS employee_db_test.employee_project (
				EMPLOYEE_PROJECT_SQID INT(11) NOT NULL,
				EMPLOYEE_SQID INT(11) NOT NULL,
				PROJECT_ID INT(11) NOT NULL,
				START_DATE DATE NOT NULL,
				END_DATE DATE NOT NULL,
				INS_USER INT(11) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				PRIMARY KEY (EMPLOYEE_PROJECT_SQID),
				CONSTRAINT EMP_PROJECT_EMPID_FK
					FOREIGN KEY (EMPLOYEE_SQID)
					REFERENCES employee_db_test.employee (EMPLOYEE_SQID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT EMP_PROJECT_PROJECTID_FK
					FOREIGN KEY (PROJECT_ID)
					REFERENCES employee_db_test.project (PROJECT_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION
				) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>

    <changeSet id="17" author="Rakesh Mhaske">
        <sql dbms="mysql" splitStatements="true" stripComments="true">
            <![CDATA[
			  CREATE TABLE IF NOT EXISTS employee_db_test.employee_skill (
				EMPLOYEE_SKILL_SQID INT(11) NOT NULL,
				EMPLOYEE_SQID INT(11) NOT NULL,
				SKILL_ID INT(11) NOT NULL,
				CERTIFIED TINYINT NOT NULL,
				USED_IN_PROJECT TINYINT NULL,
				INS_USER INT(11) NOT NULL,
				INS_DATE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
				INDEX fk_employee_has_employee_skill_employee_skill1_idx (SKILL_ID ASC) ,
				INDEX fk_employee_has_employee_skill_employee1_idx (EMPLOYEE_SQID ASC) ,
				PRIMARY KEY (EMPLOYEE_SKILL_SQID),
				UNIQUE INDEX uk_employee_skill (SKILL_ID ASC, EMPLOYEE_SQID ASC) ,
				CONSTRAINT fk_employee_has_employee_skill_employee1
					FOREIGN KEY (EMPLOYEE_SQID)
					REFERENCES employee_db_test.employee (EMPLOYEE_SQID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION,
				CONSTRAINT fk_employee_has_employee_skill_employee_skill1
					FOREIGN KEY (SKILL_ID)
					REFERENCES employee_db_test.skill (SKILL_ID)
					ON DELETE NO ACTION
					ON UPDATE NO ACTION
				) ENGINE = InnoDB DEFAULT CHARACTER SET = utf8mb4;
            ]]>
        </sql>
    </changeSet>


</databaseChangeLog>